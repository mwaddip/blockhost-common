# Blockhost VM Database Configuration
# This file configures the VM provisioning database and resource pools.
#
# Managed by: blockhost-common
# Used by: blockhost-provisioner, blockhost-engine

# Terraform working directory (where .tf.json files go and terraform runs)
# This is typically set during blockhost-engine initialization
terraform_dir: /var/lib/blockhost/terraform

# Database file path (JSON file tracking VMs, IPs, and NFT tokens)
db_file: /var/lib/blockhost/vms.json

# Field name mappings (for compatibility/migration to other backends)
fields:
  vm_name: vm_name
  vmid: vmid
  ip_address: ip_address
  expires_at: expires_at
  owner: owner
  status: status
  created_at: created_at

# IP allocation pool for provisioned VMs
# Adjust network, start, and end to match your infrastructure
ip_pool:
  network: "192.168.122.0/24"
  start: 200
  end: 250
  gateway: "192.168.122.1"

# VMID range for dynamically created VMs
# Must not conflict with existing VMs or templates on your Proxmox host
vmid_range:
  start: 100
  end: 999

# Default expiry for new VMs (in days)
# VMs are automatically marked for garbage collection after this period
default_expiry_days: 30

# Grace period before garbage collector destroys expired VMs (in days)
# Users have this many days after expiry to renew before VM destruction
gc_grace_days: 3
